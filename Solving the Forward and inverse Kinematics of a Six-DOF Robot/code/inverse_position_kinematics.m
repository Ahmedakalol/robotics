function q = inverse_position_kinematics(max_iterations, q_0, X)
  
      q_0=[q_0(1);q_0(2); q_0(3); q_0(4);q_0(5);q_0(6)];
      X = [X(1) ; X(2); X(3)]
      q_i=[q_0(1);q_0(2); q_0(3); q_0(4);q_0(5);q_0(6)];
      q1 = q_i(1);
      q2 = q_i(2);
      q3 = q_i(3);
      q4 = q_i(4);
      q5 = q_i(5);
      q6 = q_i(6);
      
      
       H=[10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*sin((pi*q4)/180))/180 - (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180))/180 + (pi*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/180) - (pi*sin((pi*q1)/180))/36 - (pi*cos((pi*q2)/180)*sin((pi*q1)/180))/36 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - (pi*cos((pi*q2)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/18 - (pi*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180))/36 - 10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 - 10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18,  10*sin((pi*q5)/180)*((pi*cos((pi*q4)/180)*sin((pi*q1)/180))/180 - (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)*sin((pi*q4)/180))/180),   (pi*cos((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180) - cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)))/18 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q5)/180))/18, 0
(pi*cos((pi*q1)/180))/36 + 10*sin((pi*q5)/180)*((pi*sin((pi*q1)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180))/180 - (pi*cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*sin((pi*q3)/180))/18 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*sin((pi*q2)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180))/36 - 10*sin((pi*q5)/180)*((pi*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - 10*sin((pi*q5)/180)*((pi*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, -10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q4)/180))/180 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q4)/180))/180), - (pi*cos((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180) + cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)))/18 - (pi*sin((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q5)/180))/18, 0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,                                                                                                                                                                                           (pi*sin((pi*(q2 + q3))/180))/18 + (pi*cos((pi*q2)/180))/36 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180))/36,                                                                                                                                                                          (pi*sin((pi*(q2 + q3))/180))/18 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180))/36,                                                                                                               (pi*cos((pi*(q4 + q5))/180)*sin((pi*(q2 + q3))/180))/36 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*(q4 - q5))/180))/36,                                                                                                           (pi*cos((pi*(q4 + q5))/180)*sin((pi*(q2 + q3))/180))/36 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*q5)/180))/18 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*(q4 - q5))/180))/36, 0];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    
     
%      
%     L = [ 5*cos((pi*q1)/180) + 5*cos((pi*q1)/180)*cos((pi*q2)/180) + 10*sin((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180) - cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)) + 10*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180) + 10*cos((pi*q1)/180)*cos((pi*q2)/180)*sin((pi*q3)/180) + 10*cos((pi*q1)/180)*cos((pi*q3)/180)*sin((pi*q2)/180);
%                   5*sin((pi*q1)/180) + 5*cos((pi*q2)/180)*sin((pi*q1)/180) - 10*sin((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180) + cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)) + 10*cos((pi*q2)/180)*sin((pi*q1)/180)*sin((pi*q3)/180) + 10*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q2)/180) + 10*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180);
%                   5*sin((pi*q2)/180) - 10*cos((pi*(q2 + q3))/180) + 5*sin((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180) - 10*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180) - 5*sin((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180) + 5 ]                                                                                                                                                                  
%   
%               
    q2= pinv(H)*X;
     q_i = q_i - q2 ;
      
      
   for   i = 0 : max_iterations 
     
  
   
  
     q1 = q_i(1);
      q2 = q_i(2);
      q3 = q_i(3);
      q4 = q_i(4);
      q5 = q_i(5);
      q6 = q_i(6);
      
      
       H=[10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*sin((pi*q4)/180))/180 - (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180))/180 + (pi*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/180) - (pi*sin((pi*q1)/180))/36 - (pi*cos((pi*q2)/180)*sin((pi*q1)/180))/36 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - (pi*cos((pi*q2)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/18 - (pi*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180))/36 - 10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 - 10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180))/18 - (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18,  10*sin((pi*q5)/180)*((pi*cos((pi*q4)/180)*sin((pi*q1)/180))/180 - (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)*sin((pi*q4)/180))/180),   (pi*cos((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180) - cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)))/18 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q5)/180))/18, 0
(pi*cos((pi*q1)/180))/36 + 10*sin((pi*q5)/180)*((pi*sin((pi*q1)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180))/180 - (pi*cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/180) + (pi*cos((pi*q1)/180)*cos((pi*q2)/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180))/18 + (pi*cos((pi*q1)/180)*cos((pi*q2)/180)*sin((pi*q3)/180))/18 + (pi*cos((pi*q1)/180)*cos((pi*q3)/180)*sin((pi*q2)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180))/36 - 10*sin((pi*q5)/180)*((pi*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, (pi*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180))/18 - 10*sin((pi*q5)/180)*((pi*cos((pi*q2)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q3)/180))/180 + (pi*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180))/180) + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180))/18 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180))/18, -10*sin((pi*q5)/180)*((pi*cos((pi*q1)/180)*cos((pi*q4)/180))/180 - (pi*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)*sin((pi*q4)/180))/180 + (pi*cos((pi*q2)/180)*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q4)/180))/180), - (pi*cos((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180) + cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)))/18 - (pi*sin((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q5)/180))/18, 0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,                                                                                                                                                                                           (pi*sin((pi*(q2 + q3))/180))/18 + (pi*cos((pi*q2)/180))/36 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180))/36,                                                                                                                                                                          (pi*sin((pi*(q2 + q3))/180))/18 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180))/36 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180))/18 - (pi*cos((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180))/36,                                                                                                               (pi*cos((pi*(q4 + q5))/180)*sin((pi*(q2 + q3))/180))/36 - (pi*sin((pi*(q2 + q3))/180)*cos((pi*(q4 - q5))/180))/36,                                                                                                           (pi*cos((pi*(q4 + q5))/180)*sin((pi*(q2 + q3))/180))/36 + (pi*cos((pi*(q2 + q3))/180)*sin((pi*q5)/180))/18 + (pi*sin((pi*(q2 + q3))/180)*cos((pi*(q4 - q5))/180))/36, 0];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    
     
     
%     L = [ 5*cos((pi*q1)/180) + 5*cos((pi*q1)/180)*cos((pi*q2)/180) + 10*sin((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + cos((pi*q1)/180)*cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180) - cos((pi*q1)/180)*cos((pi*q4)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)) + 10*sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180) + 10*cos((pi*q1)/180)*cos((pi*q2)/180)*sin((pi*q3)/180) + 10*cos((pi*q1)/180)*cos((pi*q3)/180)*sin((pi*q2)/180);
%                   5*sin((pi*q1)/180) + 5*cos((pi*q2)/180)*sin((pi*q1)/180) - 10*sin((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - cos((pi*q2)/180)*cos((pi*q3)/180)*cos((pi*q4)/180)*sin((pi*q1)/180) + cos((pi*q4)/180)*sin((pi*q1)/180)*sin((pi*q2)/180)*sin((pi*q3)/180)) + 10*cos((pi*q2)/180)*sin((pi*q1)/180)*sin((pi*q3)/180) + 10*cos((pi*q3)/180)*sin((pi*q1)/180)*sin((pi*q2)/180) + 10*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180);
%                   5*sin((pi*q2)/180) - 10*cos((pi*(q2 + q3))/180) + 5*sin((pi*(q2 + q3))/180)*sin((pi*(q4 + q5))/180) - 10*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180) - 5*sin((pi*(q2 + q3))/180)*sin((pi*(q4 - q5))/180) + 5 ] ;                                                                                                                                                                 

              
    q2= pinv(H)*X ;
     q_i = q_i - q2 ;
       q = q_i;
               
   end
     
           q = q_i

  
   
  end